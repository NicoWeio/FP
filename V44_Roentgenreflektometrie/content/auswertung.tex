\section{Auswertung}
\label{sec:auswertung}

% COULDDO: Fehlerrechnung

\subsection{Detektorscan}
Um die Strahlbreite zu quantifizieren,
wird der Detektorscan durch eine Gauß-Funktion approximiert,
welche zusätzliche Parameter für Untergrund ($I_0$) und Verschiebung ($\alpha_0$) enthält:

\begin{equation*}
    % I_max * np.exp(-((α - α_0)**2) / (2 * σ**2)) + I_0
    I(\alpha) = I_{\max} \exp\left(-\frac{( \alpha - \alpha_0)^2}{2 \sigma^2}\right) + I_0 \; .
\end{equation*}

Die Parameter werden mithilfe der Funktion \texttt{curve\_fit} aus dem Paket \texttt{scipy.optimize} bestimmt.
Sie ergeben sich zu:
\begin{align*}
    I_{\max} &= \SI{7.49(9)e5}{\per\second} \\
    I_0 &= \SI{7.5(22)e3}{\per\second} \\
    σ &= \SI{0.0431 \pm 0.0006}{\degree} \\
    α_0 &= \SI{-0.0017 \pm 0.0006}{\degree} \; .
\end{align*}

Die Halbwertsbreite beträgt somit:
\[
    \alpha_\text{FWHM}
    = 2 \sqrt{2 \ln 2} \cdot \sigma
    = \SI{0.1014 \pm 0.0014}{\degree} \; .
\]

In \autoref{fig:plt:1_detektor} sind die Messwerte sowie Fit und Halbwertsbreite dargestellt.

\begin{figure}
    \centering
    \includegraphics[width=0.75\textwidth]{build/plt/1_detektor.pdf}
    \caption{Messwerte und Fit des Detektorscans.}
    \label{fig:plt:1_detektor}
\end{figure}


\FloatBarrier
\subsection{Z-Scan} \label{sec:auswertung:zscan}
\autoref{fig:plt:2_z1} zeigt die Messwerte des Z-Scans.
Die hervorgehobene Flanke von hoher zu geringer Intensität kann verwendet werden,
um die Breite des Röntgenstrahls zu abzuschätzen.
Sie beträgt etwa \SI{0.24}{\milli\meter}.
Die maximale Intensität liegt hier bei \SI{7.964(9)e5}{\per\second}
und somit oberhalb des gemessenen sowie gefitteten Maximums des Detektorscans.
% NOTE: größter Messwert dort: (7.659+/-0.009)e+05 / second

\begin{figure}
    \centering
    \includegraphics[width=0.75\textwidth]{build/plt/2_z1.pdf}
    \caption{Messwerte des Z-Scans mit hervorgehobener Strahlbreite.}
    \label{fig:plt:2_z1}
\end{figure}


\FloatBarrier
\subsection{Rockingscan} \label{sec:auswertung:rockingscan}
Mithilfe des in \autoref{fig:plt:4_rocking1_linear}
% NOTE: Verzichte auf explizite Nennung von fig:plt:4_rocking1_log zugunsten besserer Seitenumbrüche
    % in \autoref{fig:plt:4_rocking1_linear} linear
    % und in \autoref{fig:plt:4_rocking1_log} logarithmisch
dargestellten Rockingscans
können die Geometriewinkel $\alpha_{\text{g}, 1}$ und $\alpha_{\text{g}, 2}$
als Übergangspunkte zum Untergrund bestimmt werden.
Sie und ihr Mittelwert $\alpha_\text{g}$ betragen:
\begin{align*}
    \alpha_{\text{g}, 1} &= \SI{-0.48}{\degree} \\
    \alpha_{\text{g}, 2} &= \phantom{-} \SI{0.48}{\degree} \\
    \alpha_\text{g} &= \frac{|\alpha_{\text{g}, 1}| + |\alpha_{\text{g}, 2}|}{2}
        = \SI{0.48}{\degree}
\end{align*}

Eine alternative Abschätzung der Geometriewinkel
geht aus der in \autoref{sec:auswertung:zscan} bestimmten Strahlbreite $d_0$ und der Probendurchmesser $D = \SI{20}{\milli\meter}$ hervor.
Es ergibt sich:
\[
    \alpha_\text{g}' = \arcsin{\frac{d_0}{D}}
    = \SI{0.69}{\degree} \; .
\]

\begin{figure}
    \centering
    \includegraphics[width=0.75\textwidth]{build/plt/4_rocking1_linear.pdf}
    \caption{Messwerte des Rockingscans mit hervorgehobenen Geometriewinkeln.}
    \label{fig:plt:4_rocking1_linear}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=0.75\textwidth]{build/plt/4_rocking1_log.pdf}
    \caption{Messwerte des Rockingscans in logarithmischer Darstellung.}
    \label{fig:plt:4_rocking1_log}
\end{figure}


\FloatBarrier
\subsection{Reflektivitätsscan} \label{sec:auswertung:schichtdicke}
Die betrachteten Reflektivitäten setzen sich aus zwei Messungen zusammen:
dem Reflektivitätsscan und dem diffusen Scan.
Der Reflektivitätsscan wird durch
    Subtraktion des diffusen Scans sowie
    Division durch den Geometriefaktor $G$ (\autoref{eqn:geometriefaktor})
korrigiert.
\autoref{fig:plt:schichtdicke_a} zeigt die Messwerte beider Messungen sowie die korrigierten Reflektivitäten
in Abhängigkeit des
Winkels $\alpha$.
% Wellenvektorübertrags $q = \frac{4\pi}{\lambda} · \sin{\frac{\pi}{180} \alpha_i}$.

Mittels der Funktion \texttt{find\_peaks} aus \texttt{scipy.signal} werden die Maxima der Kiessig-Oszillationen bestimmt.
Die Abstände $\symup{\Delta} \alpha_i$ zwischen den Maxima
mit der Wellenlänge $\lambda = \SI{1.54}{\angstrom}$
erlauben den Rückschluss auf die Schichtdicke des Polystyrol gemäß \autoref{eqn:schichtdicke_kiessig}:
\[
    d_\text{PS} = \SI{830.5}{\angstrom} \; .
\]

Für die theoretische Beschreibung der Kiessig-Oszillationen werden weitere Parameter manuell an die Messwerte angepasst.
Diese beinhalten Brechungsindizes $n = 1 - \delta + i\beta$ und Rauigkeiten $\sigma$
für die unterschiedlichen Schichten beziehungsweise Grenzflächen:
\begin{align*}
    n_\text{Luft} &= 1 \\
    n_\text{PS} = 1 - \delta_\text{PS} + i \beta_\text{PS} &= 1 - \num{1.10e-6} + i \cdot \num{5.00e-9} \\
    n_\text{Si} = 1 - \delta_\text{PS} + i \beta_\text{PS} &= 1 - \num{7.19e-6} + i \cdot \num{1.69e-7} \\
    \sigma_\text{Luft–PS} &= \SI{24.8}{\angstrom} \\
    \sigma_\text{PS–Si} &= \SI{11.9}{\angstrom} \\
\end{align*}
Außerdem wird eine (vom aus den Abständen der Maxima berechneten Wert unabhängige) Schichtdicke des Polystyrols von
$d_\text{PS}' = \SI{872.5}{\angstrom}$ verwendet.

Aus den Korrekturen $\delta$ ergeben sich zudem die kritischen Winkel der Totalreflexion:
\begin{align*}
    \alpha_\text{c, PS} &= \SI{0.09}{\degree}
    &
    \alpha_\text{c, Si} &= \SI{0.22}{\degree} \\
\end{align*}

Die (wie zuvor beschrieben) korrigierten Messwerte,
die kritischen Winkel
sowie die Theoriekurven mit und ohne Berücksichtigung der Rauigkeit
sind in \autoref{fig:plt:schichtdicke_b}
    (beziehungsweise \autoref{fig:plt:schichtdicke_c})
dargestellt.


% Plot-Aufteilung:
% 1.
% → Messdaten
% → Messdaten korrigiert um diffuse Strahlung
% → Messdaten korrigiert um Geometriefaktor
% → Messdaten korrigiert um diffuse Strahlung und Geometriefaktor
\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{build/plt/schichtdicke_messwerte.pdf}
    \caption{
        Unveränderte und korrigierte Messwerte zur Bestimmung der Reflektivität.
        Zur besseren Lesbarkeit wird auf Fehlerbalken verzichtet.
    }
    \label{fig:plt:schichtdicke_a}
\end{figure}
% 2.
% → Messdaten (nur korrigiert)
% → Theorie-Kurve / Fit
%   → Fresnel-Reflektivität
%   → glatt
%   → rau
% → kritische Winkel
\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{build/plt/schichtdicke_fit.pdf}
    \caption{
        Korrigierte Messwerte und Theoriekurve zur Reflektivität,
        zugeschnitten auf die Kiessig-Oszillationen.
    }
    \label{fig:plt:schichtdicke_b}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{build/plt/schichtdicke_theoriekurven.pdf}
    \caption{
        Theoriekurven zur Reflektivität,
        zugeschnitten auf die Kiessig-Oszillationen.
    }
    \label{fig:plt:schichtdicke_c}
\end{figure}
